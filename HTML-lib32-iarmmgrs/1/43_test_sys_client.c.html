<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>Coverity error reader: /home/amadha013/community/mw-dev/build-raspberrypi4-64-rdke/tmp/work/raspberrypi4-64-rdke-middleware-rdkmllib32-linux-gnueabi/lib32-iarmmgrs/1.0.13-r0/git/test/test_sys_client.c</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head>
<body link="#000000" vlink="#000000"><pre>
<b><a name="line1">1    </a></b>	/*
<b><a name="line2">2    </a></b>	 * If not stated otherwise in this file or this component's LICENSE file the
<b><a name="line3">3    </a></b>	 * following copyright and licenses apply:
<b><a name="line4">4    </a></b>	 *
<b><a name="line5">5    </a></b>	 * Copyright 2016 RDK Management
<b><a name="line6">6    </a></b>	 *
<b><a name="line7">7    </a></b>	 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<b><a name="line8">8    </a></b>	 * you may not use this file except in compliance with the License.
<b><a name="line9">9    </a></b>	 * You may obtain a copy of the License at
<b><a name="line10">10   </a></b>	 *
<b><a name="line11">11   </a></b>	 * http://www.apache.org/licenses/LICENSE-2.0
<b><a name="line12">12   </a></b>	 *
<b><a name="line13">13   </a></b>	 * Unless required by applicable law or agreed to in writing, software
<b><a name="line14">14   </a></b>	 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<b><a name="line15">15   </a></b>	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<b><a name="line16">16   </a></b>	 * See the License for the specific language governing permissions and
<b><a name="line17">17   </a></b>	 * limitations under the License.
<b><a name="line18">18   </a></b>	*/
<b><a name="line19">19   </a></b>	
<b><a name="line20">20   </a></b>	
<b><a name="line21">21   </a></b>	/**
<b><a name="line22">22   </a></b>	* @defgroup iarmmgrs
<b><a name="line23">23   </a></b>	* @{
<b><a name="line24">24   </a></b>	* @defgroup test
<b><a name="line25">25   </a></b>	* @{
<b><a name="line26">26   </a></b>	**/
<b><a name="line27">27   </a></b>	
<b><a name="line28">28   </a></b>	
<b><a name="line29">29   </a></b>	#include &lt;stdio.h&gt;
<b><a name="line30">30   </a></b>	#include &lt;stdlib.h&gt;
<b><a name="line31">31   </a></b>	#include &lt;unistd.h&gt;
<b><a name="line32">32   </a></b>	#include &lt;string.h&gt;
<b><a name="line33">33   </a></b>	#include &quot;libIBus.h&quot;
<b><a name="line34">34   </a></b>	#include &quot;libIBusDaemon.h&quot;
<b><a name="line35">35   </a></b>	#include &quot;sysMgr.h&quot;
<b><a name="line36">36   </a></b>	#include &quot;libIARMCore.h&quot;
<b><a name="line37">37   </a></b>	
<b><a name="line38">38   </a></b>	static void _evtHandler(const char *owner, IARM_EventId_t eventId, void *data, size_t len)
<b><a name="line39">39   </a></b>	{
<b><a name="line40">40   </a></b>		unsigned long messageLength=0;
<b><a name="line41">41   </a></b>	
<b><a name="line42">42   </a></b>		if (strcmp(owner, IARM_BUS_SYSMGR_NAME)  == 0) {
<b><a name="line43">43   </a></b>			 switch(eventId){
<b><a name="line44">44   </a></b>	            case IARM_BUS_SYSMGR_EVENT_XUPNP_DATA_UPDATE: 
<b><a name="line45">45   </a></b>	                {
<b><a name="line46">46   </a></b>						IARM_Bus_SYSMgr_EventData_t *eventData = (IARM_Bus_SYSMgr_EventData_t*)data;
<b><a name="line47">47   </a></b>						messageLength = eventData-&gt;data.xupnpData.deviceInfoLength;
<b><a name="line48">48   </a></b>						printf(&quot; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  EVENT_XUPNP_DATA_UPDATE messageLength : %ld \n&quot;, messageLength);
<b><a name="line49">49   </a></b>						break;
<b><a name="line50">50   </a></b>	                }
<b><a name="line51">51   </a></b>	        default:
<b><a name="line52">52   </a></b>				break;
<b><a name="line53">53   </a></b>			}
<b><a name="line54">54   </a></b>		}
<b><a name="line55">55   </a></b>	}
<b><a name="line56">56   </a></b>	
<b><a name="line57">57   </a></b>	int main()
<b><a name="line58">58   </a></b>	{
<b><a name="line59">59   </a></b>		IARM_Result_t retCode = IARM_RESULT_SUCCESS;
<b><a name="line60">60   </a></b>		IARM_Bus_SYSMgr_EventData_t eventData;
<b><a name="line61">61   </a></b>	
<b><a name="line62">62   </a></b>	
<b><a name="line63">63   </a></b>		printf(&quot;Client Entering %d\r\n&quot;, getpid());
<b><a name="line64">64   </a></b>		IARM_Bus_Init(&quot;Sys Client&quot;);
<b><a name="line65">65   </a></b>		IARM_Bus_Connect();
<b><a name="line66">66   </a></b>	
<b><a name="line67">67   </a></b>	    IARM_Bus_RegisterEventHandler(IARM_BUS_SYSMGR_NAME,IARM_BUS_SYSMGR_EVENT_XUPNP_DATA_UPDATE,_evtHandler);
<b><a name="line68">68   </a></b>	
<b><a name="line69">69   </a></b>		
<b><a name="line70">70   </a></b>		while(1){
<b><a name="line71">71   </a></b>		
<b><a name="line72">72   </a></b>			sleep(30);
<b><a name="line73">73   </a></b>		    eventData.data.xupnpData.deviceInfoLength = 0;
<b><a name="line74">74   </a></b>	        IARM_Bus_BroadcastEvent(IARM_BUS_SYSMGR_NAME,
<b><a name="line75">75   </a></b>				(IARM_EventId_t)IARM_BUS_SYSMGR_EVENT_XUPNP_DATA_REQUEST,(void *)&amp;eventData, sizeof(eventData));
<b><a name="line76">76   </a></b>			printf(&quot;&gt;&gt;&gt;&gt;&gt; Generate IARM_BUS_SYSMGR_NAME EVENT ::: IARM_BUS_SYSMGR_EVENT_XUPNP_DATA_REQUEST \r\n&quot;);
<b><a name="line77">77   </a></b>			
<b><a name="line78">78   </a></b>			sleep(30);
<b><a name="line79">79   </a></b>	
<b><a name="line80">80   </a></b>		}
</pre>
<table summary="events" bgcolor=#e0e0e0>
<tr><td><font color="red">
<a name="error:0"></a>
<a name="error"></a>
<!-- merge-key 66e28f90f346d428f06e23d181a29a79 -->
<b>(1) Event unreachable</b>: </font></td>
<td><font color="red">This code cannot be reached: &quot;IARM_Bus_Disconnect();&quot;.</font></td>
</tr>
</table>
<pre><b><a name="line81">81   </a></b>		IARM_Bus_Disconnect();
<b><a name="line82">82   </a></b>		IARM_Bus_Term();
<b><a name="line83">83   </a></b>		printf(&quot;Sys Client Exiting\r\n&quot;);
<b><a name="line84">84   </a></b>	}
<b><a name="line85">85   </a></b>	
<b><a name="line86">86   </a></b>	
<b><a name="line87">87   </a></b>	/** @} */
<b><a name="line88">88   </a></b>	/** @} */
<b><a name="line89">89   </a></b>	


















































</pre></body>
</html>
